(window.webpackJsonpGUI=window.webpackJsonpGUI||[]).push([[74],{1501:function(e,t,n){"use strict";n.r(t),function(e){var t=n(171),o=n.n(t),s=n(50),r=n(541),a=n(447),i=n(186),c=n(118),l=n(1526),d=n(1527),u=n(1528),p=n(1530),h=n(1531),g=n(1505),b=(n(854),n(1534)),m=n(1535);const f=e=>e.replace(/([<>'"&])/g,(e,t)=>"&#".concat(t.charCodeAt(0),";")),y=e=>e.replace(/-([a-z])/g,e=>e[1].toUpperCase());let v=null;let k,w=[];const C=e=>{w=w.filter(t=>t!==e)};class M extends a.a{constructor(){super(),this._isInReducer=!1,this._initialized=!1,this._nextState=null}initialize(){this._initialized||(i.a.appStateReducer=(e,t,n)=>{this._isInReducer=!0,this._nextState=n,this.dispatchEvent(new CustomEvent("statechanged",{detail:{action:e,prev:t,next:n}})),this._nextState=null,this._isInReducer=!1},this._initialized=!0)}dispatch(e){this._isInReducer?queueMicrotask(()=>i.a.appStateStore.dispatch(e)):i.a.appStateStore.dispatch(e)}get state(){return this._nextState?this._nextState:i.a.appStateStore.getState()}}const E=()=>{const e=_.state.scratchGui.mode;return e.isEmbedded?"embed":e.isFullScreen?"fullscreen":e.isPlayerOnly?"projectpage":"editor"},_=new M,x=_.state.locales.locale.split("-")[0],S=(async()=>{if(d.a[x]){const e=await d.a[x]();Object.assign(l,e)}})(),N=e=>"addons-display-none-".concat(e),T=e=>e.split(/(?=[^\\]%[nbs])/g).map(e=>e.trim()).filter(e=>"%"===e.charAt(0)).map(e=>e.substring(0,2));let I=!1;const D={color:"#29beb8",secondaryColor:"#3aa8a4",tertiaryColor:"#3aa8a4"},j=[],O=["editor-devtools","block-switching","blocks2image","swap-local-global"];let L=!1;const A=e=>Object.keys(e).find(e=>e.startsWith("__reactInternalInstance$"));class z extends a.a{constructor(e){super(),this._id=e,this._seenElements=new WeakSet,this.traps={get vm(){return _.state.scratchGui.vm},getBlockly:()=>i.a.blockly?Promise.resolve(i.a.blockly):new Promise(e=>{i.a.blocklyCallbacks.push(()=>e(i.a.blockly))}),getPaper:async()=>{const e=await this.waitForElement("[class*='paint-editor_mode-selector']",{reduxCondition:e=>1===e.scratchGui.editorTab.activeTabIndex&&!e.scratchGui.mode.isPlayerOnly});let t,n=e[Object.keys(e).find(e=>e.startsWith("__reactInternalInstance$"))].child;for(;n;){const e=n.child.stateNode;if(e.tool){t=e.tool;break}if(e.blob&&e.blob.tool){t=e.blob.tool;break}n=n.sibling}if(t){return t._scope}throw new Error("cannot find paper :(")},getInternalKey:A}}get redux(){return _}waitForElement(e){let{markAsSeen:t=!1,condition:n,reduxCondition:o,reduxEvents:s}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=!0;const a=()=>!!r&&(!(n&&!n())&&!(o&&!o(_.state)));if(a()){const n=document.querySelectorAll(e);for(const e of n)if(!this._seenElements.has(e))return t&&this._seenElements.add(e),Promise.resolve(e)}let i;return s&&(r=!1,i=e=>{let{detail:t}=e;const n=t.action.type;s.includes(n)&&"fontsLoaded/SET_FONTS_LOADED"!==n&&(r=!0)},this.redux.initialize(),this.redux.addEventListener("statechanged",i)),new Promise(n=>{const o=()=>{if(!a())return;const s=document.querySelectorAll(e);for(const e of s)if(!this._seenElements.has(e)){n(e),C(o),t&&this._seenElements.add(e),i&&this.redux.removeEventListener("statechanged",i);break}};var s;s=o,k||(k=new MutationObserver(()=>{for(const e of w)e()}),k.observe(document.documentElement,{attributes:!1,childList:!0,subtree:!0})),w.push(s)})}appendToSharedSpace(e){let{space:t,element:n,order:o,scope:s}=e;const r={stageHeader:{element:()=>document.querySelector("[class^='stage-header_stage-size-row']"),from:()=>[],until:()=>[document.querySelector("[class^='stage-header_stage-size-toggle-group']"),document.querySelector("[class^='stage-header_stage-size-row']").lastChild]},fullscreenStageHeader:{element:()=>document.querySelector("[class^='stage-header_stage-menu-wrapper']"),from:function(){let e=this.element().querySelector(".addon-spacer");return e||(e=document.createElement("div"),e.style.marginLeft="auto",e.className="addon-spacer",this.element().insertBefore(e,this.element().lastChild)),[e]},until:()=>[document.querySelector("[class^='stage-header_stage-menu-wrapper']").lastChild]},afterGreenFlag:{element:()=>document.querySelector("[class^='controls_controls-container']"),from:()=>[],until:()=>[document.querySelector("[class^='stop-all_stop-all']")]},afterStopButton:{element:()=>document.querySelector("[class^='controls_controls-container']"),from:()=>[document.querySelector("[class^='stop-all_stop-all']")],until:()=>[]},afterSoundTab:{element:()=>document.querySelector("[class^='react-tabs_react-tabs__tab-list']"),from:()=>[document.querySelector("[class^='react-tabs_react-tabs__tab-list']").children[2]],until:()=>[document.querySelector(".sa-find-bar")]},assetContextMenuAfterExport:{element:()=>s,from:()=>Array.prototype.filter.call(s.children,e=>e.textContent===this.scratchMessage("gui.spriteSelectorItem.contextMenuExport")),until:()=>Array.prototype.filter.call(s.children,e=>e.textContent===this.scratchMessage("gui.spriteSelectorItem.contextMenuDelete"))},assetContextMenuAfterDelete:{element:()=>s,from:()=>Array.prototype.filter.call(s.children,e=>e.textContent===this.scratchMessage("gui.spriteSelectorItem.contextMenuDelete")),until:()=>[]},paintEditorZoomControls:{element:()=>document.querySelector(".sa-paintEditorZoomControls-wrapper")||(()=>{const e=Object.assign(document.createElement("div"),{className:"sa-paintEditorZoomControls-wrapper"});e.style.display="flex",e.style.flexDirection="row-reverse",e.style.height="calc(1.95rem + 2px)";const t=document.querySelector("[class^='paint-editor_zoom-controls']");return t.replaceWith(e),e.appendChild(t),e})(),from:()=>[],until:()=>[]}}[t],a=r.element();if(!a)return!1;const i=r.from(),c=r.until();n.dataset.saSharedSpaceOrder=o;let l=!1;0===i.length&&(l=!0);let d=null;const u=Array.from(a.children);for(const e of u.keys()){const t=u[e],n=Number(e);if(l){if(c.includes(t)){d=0===n?-1:u[n-1];break}if(t.dataset.saSharedSpaceOrder&&Number(t.dataset.saSharedSpaceOrder)>o){d=0===n?-1:u[n-1];break}}else i.includes(t)&&(l=!0)}return!!l&&(null===d?a.appendChild(n):-1===d?a.prepend(n):a.insertBefore(n,d.nextSibling),!0)}addBlock(e,t){let{args:n,displayName:o,callback:s}=t;const r=T(e);if(n.length!==r.length)throw new Error("Procedure code and argument list do not match");if(o){o=(e=>e.replace(/([^\s])(%[nbs])/g,(e,t,n)=>"".concat(t," ").concat(n)))(o);const t=T(o);a=r,i=t,JSON.stringify(a)!==JSON.stringify(i)&&(console.warn("displayName ".concat(o," for ").concat(e," has invalid arguments, ignoring it.")),o=e)}else o=e;var a,i;const c=this.traps.vm;c.addAddonBlock({procedureCode:e,arguments:n,callback:(e,t)=>s(e,t.thread),displayName:o}),I||(I=!0,this.traps.getBlockly().then(e=>{const t=e.BlockSvg,n=t.prototype.updateColour;t.prototype.updateColour=function(){if(!this.isInsertionMarker()&&"procedures_call"===this.type){this.procCode_&&c.runtime.getAddonBlock(this.procCode_)&&(this.colour_=D.color,this.colourSecondary_=D.secondaryColor,this.colourTertiary_=D.tertiaryColor,this.customContextMenu=null)}for(var e=arguments.length,t=new Array(e),o=0;o<e;o++)t[o]=arguments[o];return n.call(this,...t)};const o=e.Blocks.procedures_call.createAllInputs_;e.Blocks.procedures_call.createAllInputs_=function(){const e=this.procCode_&&c.runtime.getAddonBlock(this.procCode_);for(var t=arguments.length,n=new Array(t),s=0;s<t;s++)n[s]=arguments[s];if(e&&e.displayName){const t=this.procCode_;this.procCode_=e.displayName;const s=o.call(this,...n);return this.procCode_=t,s}return o.call(this,...n)},c.editingTarget&&c.emitWorkspaceUpdate()}))}getCustomBlock(e){return this.traps.vm.getAddonBlock(e)}getCustomBlockColor(){return D}setCustomBlockColor(e){Object.assign(D,e)}createBlockContextMenu(e){let{workspace:t=!1,blocks:n=!1,flyout:o=!1,comments:s=!1}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};j.push({addonId:this._id,callback:e,workspace:t,blocks:n,flyout:o,comments:s}),j.sort((e,t)=>O.indexOf(e.addonId)-O.indexOf(t.addonId)),L||(L=!0,this.traps.getBlockly().then(e=>{const t=e.ContextMenu.show;e.ContextMenu.show=function(n,o,s){const r=e.mainWorkspace.currentGesture_,a=r.targetBlock_;for(const{callback:e,workspace:t,blocks:n,flyout:s,comments:i}of j){if(t&&!a&&!r.flyout_&&!r.startBubble_||n&&a&&!r.flyout_||s&&r.flyout_||i&&r.startBubble_)try{o=e(o,a)}catch(e){console.error("Error while calling context menu callback: ",e)}}t.call(this,n,o,s);const i=e.WidgetDiv.DIV.firstChild;o.forEach((e,t)=>{if(0!==t&&e.separator){const e=i.children[t];e.style.paddingTop="2px",e.classList.add("sa-blockly-menu-item-border"),e.style.borderTop="1px solid hsla(0, 0%, 0%, 0.15)"}})}}))}createEditorContextMenu(e,t){Object(p.a)(this,e,t)}copyImage(e){if(!navigator.clipboard.write)return Promise.reject(new Error("Clipboard API not supported"));const t=[new ClipboardItem({"image/png":Object(r.a)(e)})];return navigator.clipboard.write(t)}scratchMessage(e){return _.state.locales.messages[e]}scratchClass(){const e=(()=>{if(v)return v;const e=Array.from(document.styleSheets).filter(e=>!(e.ownerNode.textContent.startsWith("/* DO NOT EDIT\n@todo This file is copied from GUI and should be pulled out into a shared library.")&&(e.ownerNode.textContent.includes("input_input-form")||e.ownerNode.textContent.includes("label_input-group_")))).map(e=>{try{return[...e.cssRules]}catch(e){return[]}}).flat().map(e=>e.selectorText).filter(e=>e).map(e=>e.match(/(([\w-]+?)_([\w-]+)_([\w\d-]+))/g)).filter(e=>e).flat();v=[...new Set(e)];const t=new MutationObserver(e=>{for(const n of e)for(const e of n.addedNodes)if("STYLE"===e.tagName)return v=null,void t.disconnect()});return t.observe(document.head,{childList:!0}),v})(),t=[];for(var n=arguments.length,o=new Array(n),s=0;s<n;s++)o[s]=arguments[s];for(const n of o)if("string"==typeof n)for(const o of e)if(o.startsWith("".concat(n,"_"))&&o.length===n.length+6){t.push(o);break}const r=o[o.length-1];if("object"==typeof r){const e=Array.isArray(r.others)?r.others:[r.others];for(const n of e)t.push(n)}return t.join(" ")}get editorMode(){return E()}displayNoneWhileDisabled(e){e.classList.add(N(this._id))}get direction(){return this.redux.state.locales.isRtl?"rtl":"ltr"}createModal(e){let{isOpen:t=!1}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return h.b(this,e,{isOpen:t})}confirm(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return h.a(this,...t)}prompt(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return h.c(this,...t)}}class P extends a.a{constructor(e,t){super(),this._addonId=e,this._manifest=t}get(e){return s.a.getAddonSetting(this._addonId,e)}}class B extends a.a{constructor(e,t){super(),this.id=e,this.disabled=!1,this.getResource=t}}class R{constructor(t){R.instances.push(this);const n=c.a[t];this.id=t,this.manifest=n,this.messageCache={},this.loading=!0,this.resources=null,this.publicAPI={global:e,console:console,addon:{tab:new z(t),settings:new P(t,n),self:new B(t,this.getResource.bind(this))},msg:this.msg.bind(this),safeMsg:this.safeMsg.bind(this)}}_msg(e,t,n){const s="".concat(this.id,"/").concat(e);if(this.messageCache[s])return this.messageCache[s].format(t);let r=l[s];if(!r)return s;n&&(r=n(r));const a=new o.a(r,x);return this.messageCache[s]=a,a.format(t)}msg(e,t){return this._msg(e,t,null)}safeMsg(e,t){return this._msg(e,t,f)}getResource(e){const t=e.substring(1),n=this.resources[t];if("string"!=typeof n)throw new Error("Unknown asset: ".concat(e));return n}updateAllStyles(){b.b(),this.updateCssVariables()}updateCssVariables(){const e=y(this.id);if(this.manifest.settings)for(const t of this.manifest.settings){const n=t.id,o="--".concat(e,"-").concat(y(n)),s=this.publicAPI.addon.settings.get(n);document.documentElement.style.setProperty(o,s)}if(this.manifest.customCssVariables)for(const t of this.manifest.customCssVariables){const n=t.name,o="--".concat(e,"-").concat(n),s=t.value,r=this.evaluateCustomCssVariable(s);document.documentElement.style.setProperty(o,r)}}evaluateCustomCssVariable(e){if("object"!=typeof e||null===e)return e;switch(e.type){case"alphaBlend":{const t=this.evaluateCustomCssVariable(e.opaqueSource),n=this.evaluateCustomCssVariable(e.transparentSource);return g.a(t,n)}case"alphaThreshold":{const t=this.evaluateCustomCssVariable(e.source);return g.e(t).a>=(this.evaluateCustomCssVariable(e.threshold)||.5)?this.evaluateCustomCssVariable(e.opaque):this.evaluateCustomCssVariable(e.transparent)}case"brighten":{const t=this.evaluateCustomCssVariable(e.source);return g.b(t,e)}case"makeHsv":{const t=this.evaluateCustomCssVariable(e.h),n=this.evaluateCustomCssVariable(e.s),o=this.evaluateCustomCssVariable(e.v);return g.c(t,n,o)}case"map":return e.options[this.evaluateCustomCssVariable(e.source)];case"multiply":{const t=this.evaluateCustomCssVariable(e.source);return g.d(t,e)}case"recolorFilter":{const t=this.evaluateCustomCssVariable(e.source);return g.f(t)}case"settingValue":return this.publicAPI.addon.settings.get(e.settingId);case"textColor":{const t=this.evaluateCustomCssVariable(e.source),n=this.evaluateCustomCssVariable(e.black),o=this.evaluateCustomCssVariable(e.white),s=this.evaluateCustomCssVariable(e.threshold);return g.h(t,n,o,s)}}return console.warn("Unknown customCssVariable",e),"#000000"}settingsChanged(){this.updateAllStyles(),this.publicAPI.addon.settings.dispatchEvent(new CustomEvent("change"))}dynamicEnable(){this.loading||(this.publicAPI.addon.self.disabled=!1,this.updateAllStyles(),this.publicAPI.addon.self.dispatchEvent(new CustomEvent("reenabled")))}dynamicDisable(){this.loading||(this.publicAPI.addon.self.disabled=!0,this.updateAllStyles(),this.publicAPI.addon.self.dispatchEvent(new CustomEvent("disabled")))}async run(){this.manifest.editorOnly&&await(()=>{if(_.state.scratchGui.mode.isPlayerOnly&&!_.state.scratchGui.mode.isEmbedded)return new Promise(e=>{const t=()=>{_.state.scratchGui.mode.isPlayerOnly||(e(),_.removeEventListener("statechanged",t))};_.initialize(),_.addEventListener("statechanged",t)})})();const e=await u.a[this.id]();this.resources=e.resources,this.manifest.noTranslations||await S;const t=100*Object(m.a)(this.id);if(this.manifest.userstyles)for(let e=0;e<this.manifest.userstyles.length;e++){const n=this.manifest.userstyles[e],o=t+e,r=()=>!this.publicAPI.addon.self.disabled&&s.a.evaluateCondition(this.id,n.if);for(const[e,t]of this.resources[n.url]){b.a(e,t).addDependent(this.id,o,r)}}const n=".".concat(N(this.id),"{display:none !important;}");if(b.a("_disabled/".concat(this.id),n).addDependent(this.id,t,()=>this.publicAPI.addon.self.disabled),this.updateCssVariables(),this.manifest.userscripts)for(const e of this.manifest.userscripts){if(!s.a.evaluateCondition(e.if))continue;(0,this.resources[e.url])(this.publicAPI)}this.loading=!1}}R.instances=[];const G=e=>{new R(e).run()};let V=E();const U=()=>{const e=E();e!==V&&(V=e,setTimeout(()=>{for(const e of R.instances)e.publicAPI.addon.tab.dispatchEvent(new CustomEvent("urlChange"))}))},W=history.replaceState;history.replaceState=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];W.apply(this,t),U()};const F=history.pushState;history.pushState=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];F.apply(this,t),U()},s.a.addEventListener("addon-changed",e=>{const t=e.detail.addonId,n=R.instances.find(e=>e.id===t);n&&n.settingsChanged(),e.detail.dynamicEnable?n?n.dynamicEnable():G(t):e.detail.dynamicDisable&&n&&n.dynamicDisable()});for(const e of Object.keys(c.a))s.a.getAddonEnabled(e)&&G(e)}.call(this,n(41))},1502:function(e,t,n){"use strict";n.d(t,"b",(function(){return u})),n.d(t,"e",(function(){return m})),n.d(t,"c",(function(){return f})),n.d(t,"d",(function(){return y})),n.d(t,"a",(function(){return v})),n.d(t,"g",(function(){return M})),n.d(t,"f",(function(){return E}));var o=n(447);let s,r=!1,a=new WeakMap,i=!1,c=null;const l=new o.a;let d=Promise.resolve();const u=()=>r,p=e=>{if(e.updateMonitor||a.has(e))return;const t={time:s.runtime.currentMSecs,status:e.status};a.set(e,t),e.status=1},h=e=>{if(4===e.status)return;const t=a.get(e);t&&1!==e.status&&(t.status=e.status,e.status=1)},g=e=>{c=e},b=(e,t)=>{e.timer&&(e.timer.startTime+=s.runtime.currentMSecs-t.time);const n=e.peekStackFrame();n&&n.executionContext&&n.executionContext.timer&&(n.executionContext.timer.startTime+=s.runtime.currentMSecs-t.time)},m=e=>{const t=r!==e;if(t&&(r=e,l.dispatchEvent(new CustomEvent("change"))),r){d=d.then(()=>s.runtime.audioEngine.audioContext.suspend()),s.runtime.ioDevices.clock._paused||s.runtime.ioDevices.clock.pause(),s.runtime.threads.forEach(p);const e=s.runtime.sequencer.activeThread;e&&(g(e),l.dispatchEvent(new CustomEvent("step")))}if(!r&&t){d=d.then(()=>s.runtime.audioEngine.audioContext.resume()),s.runtime.ioDevices.clock.resume();for(const e of s.runtime.threads){const t=a.get(e);t&&(b(e,t),e.status=t.status)}a=new WeakMap;(e=>{const t=s.runtime.threads,n=w(e);if(-1!==n)for(let e=n;e<t.length;e++){const n=t[e],o=n.status;0!==o&&2!==o&&3!==o||(s.runtime.sequencer.activeThread=n,s.runtime.sequencer.stepThread(n))}})(c),c=null}},f=e=>{l.addEventListener("change",()=>e(r))},y=e=>{l.addEventListener("step",e)},v=()=>c,k=e=>{const t=a.get(e);return t?t.status:e.status},w=e=>e?s.runtime.threads.findIndex(t=>t.target===e.target&&t.topBlock===e.topBlock&&t.stackClick===e.stackClick&&t.updateMonitor===e.updateMonitor):-1,C=e=>{const t=s.runtime.threads;for(let n=e;n<t.length;n++){const e=t[n];if(e.updateMonitor)continue;if(e.isCompiled)continue;const o=k(e);if(0===o||2===o||3===o)return p(e),e}return null},M=()=>{if(c){const e=a.get(c);b(c,e),e.time=s.runtime.currentMSecs;(e=>{if(4===e.status)return!1;if(e.isCompiled)return!1;const t=e.peekStack();if(!t&&(e.popStack(),0===e.stack.length))return e.status=4,!1;i=!0,s.runtime.sequencer.activeThread=e;const n=["special error used by Scratch Addons for implementing single-stepping"];Object.defineProperty(e,"blockGlowInFrame",{set(e){throw n}});try{e.status=0,e.warpTimer&&e.warpTimer.start();try{s.runtime.sequencer.stepThread(e)}catch(e){if(e!==n)throw e}if(0!==e.status)return!1;for(e.peekStack()===t&&e.goToNextBlock();!e.peekStack();){if(e.popStack(),0===e.stack.length)return e.status=4,!1;const t=e.peekStackFrame();if(t.isLoop){if(e.peekStackFrame().warpMode)continue;return!1}if(t.waitingReporter)return!1;e.goToNextBlock()}return!0}finally{i=!1,s.runtime.sequencer.activeThread=null,Object.defineProperty(e,"blockGlowInFrame",{value:t,configurable:!0,enumerable:!0,writable:!0}),4!==e.status&&(e.status=1)}})(c)||(c=C(w(c)+1))}if(!c){g(C(0)),s.runtime.ioDevices.clock._pausedTime+=s.runtime.currentStepTime;const e=s.runtime.audioEngine.audioContext;for(const t of s.runtime.targets)for(const n of Object.keys(t.sprite.soundBank.soundPlayers)){const o=t.sprite.soundBank.soundPlayers[n];o.outputNode&&(o.outputNode.stop(e.currentTime),o._createSource(),o.outputNode.start(e.currentTime,e.currentTime-o.startingUntil+s.runtime.currentStepTime/1e3),o.startingUntil-=s.runtime.currentStepTime/1e3)}for(const e of s.runtime.threads)a.has(e)&&(a.get(e).time+=s.runtime.currentStepTime);i=!0;const t=s.runtime._hats;for(const e in t){if(!Object.prototype.hasOwnProperty.call(t,e))continue;t[e].edgeActivated&&s.runtime.startHats(e)}i=!1}l.dispatchEvent(new CustomEvent("step"))},E=e=>{if(s)return;s=e;const t=s.runtime.sequencer.stepThreads;s.runtime.sequencer.stepThreads=function(){if(u())for(const e of this.runtime.threads)h(e);return t.call(this)};const n=s.runtime.greenFlag;s.runtime.greenFlag=function(){return m(!1),n.call(this)};const o=s.runtime.startHats;s.runtime.startHats=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];const s=t[0],a="event_whenbroadcastreceived"===s||"control_start_as_clone"===s;if(i){if(!a&&!this.getIsEdgeActivatedHat(s))return[];const e=o.apply(this,t);for(const t of e)p(t);return e}return r&&!a?[]:o.apply(this,t)};const c=s.runtime._getMonitorThreadCount;s.runtime._getMonitorThreadCount=function(e){let t=c.call(this,e);if(r)for(const n of e)a.has(n)&&t++;return t}}},1505:function(e,t,n){"use strict";function o(e){return{r:parseInt(e.substring(1,3),16),g:parseInt(e.substring(3,5),16),b:parseInt(e.substring(5,7),16),a:e.length>=9?parseInt(e.substring(7,9),16)/255:1}}function s(e){return 1===(e=Math.round(e).toString(16)).length?"0".concat(e):e}function r(e){const t=s(e.r),n=s(e.g),o=s(e.b),r=void 0!==e.a?s(255*e.a):"";return"#".concat(t).concat(n).concat(o).concat(r)}function a(e){let{r:t,g:n,b:o}=e;t/=255,n/=255,o/=255;const s=Math.max(t,n,o),r=s-Math.min(t,n,o);if(0===r)return{h:0,s:0,v:s};const a=(s-t)/r,i=(s-n)/r,c=(s-o)/r;let l;a?i?c||(l=4+i-a):l=2+a-c:l=c-i;return{h:60*l%360,s:r/s,v:s}}function i(e){const{r:t,g:n,b:s}=o(e);return.299*t+.587*n+.114*s}function c(e,t,n,o){return"number"!=typeof(o=void 0!==o?o:170)&&(o=i(o)),i(e)>o?void 0!==t?t:"#575e75":void 0!==n?n:"#ffffff"}function l(e,t){const{r:n,g:s,b:a,a:i}=o(e);return void 0===t.r&&(t.r=1),void 0===t.g&&(t.g=1),void 0===t.b&&(t.b=1),void 0===t.a&&(t.a=1),r({r:t.r*n,g:t.g*s,b:t.b*a,a:t.a*i})}function d(e,t){const{r:n,g:s,b:a,a:i}=o(e);return void 0===t.r&&(t.r=1),void 0===t.g&&(t.g=1),void 0===t.b&&(t.b=1),void 0===t.a&&(t.a=1),r({r:255*(1-t.r)+t.r*n,g:255*(1-t.g)+t.g*s,b:255*(1-t.b)+t.b*a,a:1-t.a+t.a*i})}function u(e,t){const{r:n,g:s,b:a}=o(e),{r:i,g:c,b:l,a:d}=o(t);return r({r:(1-d)*n+d*i,g:(1-d)*s+d*c,b:(1-d)*a+d*l})}function p(e){return e.substring(0,7)}function h(e,t,n){return r(function(e){let{h:t,s:n,v:o}=e;if(0===n)return{r:255*o,g:255*o,b:255*o};t%=360,t<0&&(t+=360);const s=t/60,r=Math.floor(s),a=o*(1-n*(1-s+r)),i=o*(1-n*(s-r)),c=o*(1-n);switch(r){case 0:return{r:255*o,g:255*a,b:255*c};case 1:return{r:255*i,g:255*o,b:255*c};case 2:return{r:255*c,g:255*o,b:255*a};case 3:return{r:255*c,g:255*i,b:255*o};case 4:return{r:255*a,g:255*c,b:255*o};case 5:return{r:255*o,g:255*c,b:255*i}}}({h:"number"==typeof e?e:a(o(e)).h,s:"number"!=typeof e&&0===a(o(e)).s?0:"number"==typeof t?t:a(o(t)).s,v:"number"==typeof n?n:a(o(n)).v}))}function g(e){const{r:t,g:n,b:s}=o(e);return"url(\"data:image/svg+xml,\n    <svg xmlns='http://www.w3.org/2000/svg'>\n      <filter id='recolor'>\n        <feColorMatrix color-interpolation-filters='sRGB' values='\n          0 0 0 0 ".concat(t/255,"\n          0 0 0 0 ").concat(n/255,"\n          0 0 0 0 ").concat(s/255,"\n          0 0 0 1 0\n        '/>\n      </filter>\n    </svg>#recolor\n  \")").split("\n").join("")}n.d(t,"e",(function(){return o})),n.d(t,"h",(function(){return c})),n.d(t,"d",(function(){return l})),n.d(t,"b",(function(){return d})),n.d(t,"a",(function(){return u})),n.d(t,"g",(function(){return p})),n.d(t,"c",(function(){return h})),n.d(t,"f",(function(){return g}))},1511:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var o=n(1513);const s={block:null,timerID:null};let r=[],a=[];class i{constructor(e){this.addon=e,this.addon.tab.traps.getBlockly().then(e=>{this.blockly=e}),this.vm=this.addon.tab.traps.vm,this.offsetX=32,this.offsetY=32,this.navigationHistory=new c,this._workspace=null}getEditingTarget(){return this.vm.runtime.getEditingTarget()}setEditingTarget(e){this.getEditingTarget().id!==e&&this.vm.setEditingTarget(e)}getWorkspace(){const e=Blockly.getMainWorkspace();return e.getToolbox()&&(this._workspace=e),this._workspace}scrollBlockIntoView(e){var t;let n,r=this.getWorkspace();if(e instanceof o.a?(this.setEditingTarget(e.targetId),n=r.getBlockById(e.id)):n=e&&e.id?e:r.getBlockById(e),!n)return;let a=n.getRootBlock(),i=this.getTopOfStackFor(n).getRelativeToSurfaceXY(),c=a.getRelativeToSurfaceXY(),l=r.scale,d=c.x*l,u=i.y*l,p=n.width+d,h=n.height+u,g=r.getMetrics();if(d<g.viewLeft+this.offsetX-4||p>g.viewLeft+g.viewWidth||u<g.viewTop+this.offsetY-4||h>g.viewTop+g.viewHeight){let e=d-g.contentLeft-this.offsetX,t=u-g.contentTop-this.offsetY;this.navigationHistory.storeView(this.navigationHistory.peek(),64),r.scrollbar.set(e,t),this.navigationHistory.storeView({left:e,top:t},64)}null===(t=this.blockly)||void 0===t||t.hideChaff(),class{static flash(e){s.timerID>0&&(clearTimeout(s.timerID),s.block.svgPath_&&(s.block.svgPath_.style.fill=""));let t=4,n=!0;s.block=e,function e(){s.block.svgPath_&&(s.block.svgPath_.style.fill=n?"#ffff80":""),n=!n,t--,t>0?s.timerID=setTimeout(e,200):(s.timerID=0,s.block=null)}()}}.flash(n)}getTopOfStackFor(e){let t=e;for(;t.getOutputShape()&&t.getSurroundParent();)t=t.getSurroundParent();return t}}class c{storeView(e,t){a=[];let n=Blockly.getMainWorkspace().getMetrics(),o={left:n.viewLeft,top:n.viewTop};(!e||l(o,e)>t)&&r.push(o)}peek(){return r.length>0?r[r.length-1]:null}goBack(){const e=Blockly.getMainWorkspace(),t=e.getMetrics();let n={left:t.viewLeft,top:t.viewTop},o=this.peek();if(!o)return;if(l(n,o)<64&&r.length>1&&(r.pop(),a.push(o)),o=this.peek(),!o)return;let s=o.left-t.contentLeft,i=o.top-t.contentTop;e.scrollbar.set(s,i)}goForward(){let e=a.pop();if(!e)return;r.push(e);let t=Blockly.getMainWorkspace(),n=t.getMetrics(),o=e.left-n.contentLeft,s=e.top-n.contentTop;t.scrollbar.set(o,s)}}function l(e,t){return Math.sqrt(Math.pow(e.left-t.left,2)+Math.pow(e.top-t.top,2))}},1513:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));class o{constructor(e,t){this.targetId=e.id,this.id=t.id}}},1514:function(e,t,n){"use strict";n.d(t,"f",(function(){return c})),n.d(t,"a",(function(){return l})),n.d(t,"b",(function(){return d})),n.d(t,"e",(function(){return u})),n.d(t,"d",(function(){return p})),n.d(t,"c",(function(){return h})),n.d(t,"g",(function(){return b}));let o=!1,s=null,r=1,a=1;const i=[],c=e=>{s?s.value=e:a=e,i.forEach(e=>e())},l=()=>s?s.value:a,d=()=>0===l(),u=e=>{r=e},p=e=>{e?(u(l()),c(0)):c(r)},h=e=>{i.push(e)},g=e=>{s=e.inputNode.gain,s.value=a},b=e=>{if(o)return;o=!0;const t=e.runtime.audioEngine;t?g(t):e.runtime.once("PROJECT_LOADED",()=>{g(e.runtime.audioEngine)})}},1526:function(e){e.exports=JSON.parse('{"editor-devtools/clean-plus":"Clean up Blocks +","editor-devtools/copy-all":"Copy All","editor-devtools/copy-block":"Copy Block","editor-devtools/cut-block":"Cut Block","editor-devtools/lists":"lists","editor-devtools/make-space":"Make Space","editor-devtools/orphaned":"{count, plural, one {Developer tools: Delete 1 orphaned reporter block?} other {Developer tools: Delete # orphaned reporter blocks?} }","editor-devtools/paste":"Paste","editor-devtools/replace":"Developer tools: Switch all {name} in this sprite for the variable named:","editor-devtools/swap":"Swap {var} in Sprite","editor-devtools/unused-list":"{count, plural, one {Developer tools: Delete 1 unused local list? Here it is:\\n} other {Developer tools: Delete # unused local lists? Here they are:\\n} }","editor-devtools/unused-var":"{count, plural, one {Developer tools: Delete 1 unused local variable? Here it is:\\n} other {Developer tools: Delete # unused local variables? Here they are:\\n} }","editor-devtools/var-not-exist":"That variable does not exist...","editor-devtools/variables":"variables","find-bar/complex-broadcast":"(expression)","find-bar/find-placeholder":"Find (Ctrl+F)","middle-click-popup/start-typing":"Start Typing...","editor-searchable-dropdowns/createBroadcast":"Create message \\"{name}\\"","editor-searchable-dropdowns/createGlobalList":"Create list \\"{name}\\" for all sprites","editor-searchable-dropdowns/createGlobalVariable":"Create variable \\"{name}\\" for all sprites","editor-searchable-dropdowns/createLocalList":"Create list \\"{name}\\" for this sprite only","editor-searchable-dropdowns/createLocalVariable":"Create variable \\"{name}\\" for this sprite only","data-category-tweaks-v2/for-all-sprites":"For all sprites:","data-category-tweaks-v2/for-this-sprite-only":"For this sprite only:","data-category-tweaks-v2/list-category":"Lists","hide-flyout/lock":"Lock Palette","hide-flyout/unlock":"Unlock Palette","mediarecorder/cancel":"Cancel","mediarecorder/click-flag":"Waiting...","mediarecorder/click-flag-description":"Click the green flag to start recording. Click this button to stop.","mediarecorder/option-title":"Record Options","mediarecorder/record":"Record","mediarecorder/record-after-flag":"Do not start recording until the Green Flag is clicked","mediarecorder/record-audio":"Include project sounds","mediarecorder/record-audio-description":"This does not include Text-to-Speech.","mediarecorder/record-description":"Record the stage as a WebM file. You can save it to your computer after the recording is finished.\\nNote: variable and list monitors will not be visible.","mediarecorder/record-duration":"Record Duration (in seconds)","mediarecorder/record-mic":"Include sounds from microphone","mediarecorder/record-until-stop":"Stop recording after the project has stopped","mediarecorder/record-until-stop-disabled":"You need to enable \\"{afterFlagOption}\\" to use this option.","mediarecorder/start":"Start","mediarecorder/start-delay":"Start Delay (in seconds)","mediarecorder/starting-in":"Starting in {secs}...","mediarecorder/stop":"Stop Recording","debugger/block-breakpoint":"breakpoint","debugger/block-error":"error %s","debugger/block-log":"log %s","debugger/block-warn":"warn %s","debugger/cannot-pause-player":"Breakpoint block can only be used while on the editor.","debugger/clear":"Clear","debugger/clone-of":"Clone of {sprite}","debugger/close":"Close","debugger/console":"Logs","debugger/debug":"Debug","debugger/empty-string":"(empty string)","debugger/enter-format":"Enter export format:","debugger/export":"Export","debugger/export-desc":"Click while holding Shift to customize export format.","debugger/icon-error":"Error","debugger/icon-warn":"Warning","debugger/log-msg-broadcasted":"Broadcasted \'{broadcast}\'.","debugger/log-msg-clone-cap":"Failed to create clone of \'{sprite}\', cannot create over 300 clones.","debugger/log-msg-clone-created":"Created clone of \'{sprite}\'.","debugger/log-msg-flag-clicked":"Green flag clicked.","debugger/no-logs":"There are no logs to display.","debugger/no-threads-running":"No threads running.","debugger/step":"Step","debugger/step-desc":"Executes one block.","debugger/tab-logs":"Logs","debugger/tab-threads":"Threads","debugger/thread":"Thread {id}","debugger/unknown-sprite":"(unknown sprite)","debugger/unpause":"Resume","pause/pause":"Pause","clones/clones":"clones: {cloneCount}","color-picker/hex":"hex color","remove-sprite-confirm/confirm":"Do you want to delete the sprite?","block-count/blocks":"{num, plural, one {1 block} other {# blocks}}","onion-skinning/behind":"Behind","onion-skinning/front":"Front","onion-skinning/layering":"Layering","onion-skinning/merge":"Merge","onion-skinning/mode":"Mode","onion-skinning/next":"Next costumes","onion-skinning/opacity":"Opacity (%)","onion-skinning/opacityStep":"Opacity step (%)","onion-skinning/previous":"Previous costumes","onion-skinning/settings":"Onion Skinning Settings","onion-skinning/tint":"Tint","onion-skinning/toggle":"Toggle Onion Skinning","paint-snap/boxCenter":"Center of selection","paint-snap/boxCorners":"Corners of selection","paint-snap/boxEdgeMids":"Selection edge midpoints","paint-snap/objectCenters":"Centers of objects","paint-snap/objectCorners":"Corners of objects","paint-snap/objectEdges":"Edges of objects","paint-snap/objectMidlines":"Midlines of objects","paint-snap/off":"Off","paint-snap/on":"On","paint-snap/pageAxes":"Page x and y axes","paint-snap/pageCenter":"Center of the page","paint-snap/pageCorners":"Corners of the page","paint-snap/pageEdges":"Edges of the page","paint-snap/settings":"Snap Settings","paint-snap/snapFrom":"Snap from:","paint-snap/snapTo":"Snap to:","paint-snap/threshold":"Snapping distance","paint-snap/toggle":"Toggle Snapping","2d-color-picker/shade":"Shade","better-img-uploads/upload":"HD Upload","variable-manager/for-all-sprites":"Variables for all sprites","variable-manager/for-this-sprite":"Variables for this sprite","variable-manager/search":"Search","variable-manager/too-big":"Click to display very large value.","variable-manager/variables":"Variables","search-sprites/placeholder":"Search sprites...","sprite-properties/close-properties-panel-tooltip":"Collapse properties panel","sprite-properties/open-properties-panel-tooltip":"Open properties panel","gamepad/axes-a-b":"Axes {a} & {b}","gamepad/axis-arrows":"Arrow Keys","gamepad/axis-cursor":"Cursor","gamepad/axis-custom":"Custom","gamepad/axis-none":"None","gamepad/browser-support":"This browser and operating system have known bugs that may make this addon difficult to use. Try another browser if you encounter problems.","gamepad/button-n":"Button {n}","gamepad/clear":"Clear all controls","gamepad/config-header":"This comment contains configuration for gamepad support in third-party tools or websites such as https://turbowarp.org/\\nDo not edit by hand","gamepad/key-click":"Click","gamepad/key-down":"Down","gamepad/key-enter":"Enter","gamepad/key-left":"Left","gamepad/key-none":"(none)","gamepad/key-right":"Right","gamepad/key-space":"Space","gamepad/key-up":"Up","gamepad/keyinput-title":"Click and press a key or click to change button. Escape to cancel. Backspace or delete to clear.","gamepad/no-controllers":"No controllers detected. Try plugging one in and pressing a button on it.","gamepad/reset":"Reset all controls to project defaults","gamepad/settings":"Gamepad Settings","gamepad/store-in-project":"Store these settings in the project to override the default configuration (Experimental tool for project creators)","folders/add-to-folder":"add to folder: {folder}","folders/closed-folder":"Folder","folders/confirm-backpack-folder":"Save entire folder to backpack?","folders/create-folder":"create folder","folders/name-not-allowed":"Invalid folder name","folders/name-prompt":"Name of folder:","folders/name-prompt-title":"Create Folder","folders/open-folder":"Opened","folders/remove-folder":"remove folder","folders/remove-from-folder":"remove from folder","folders/rename-folder":"rename folder","folders/rename-folder-prompt":"Rename folder to:","folders/rename-folder-prompt-title":"Rename Folder","block-switching/control_forever":"forever","block-switching/control_if":"if","block-switching/control_if_else":"if... else","block-switching/control_repeat_until":"repeat until","block-switching/control_wait_until":"wait until","block-switching/data_changevariableby":"change variable","block-switching/data_deletealloflist":"delete all","block-switching/data_deleteoflist":"delete item","block-switching/data_hidelist":"hide list","block-switching/data_hidevariable":"hide variable","block-switching/data_insertatlist":"insert item","block-switching/data_replaceitemoflist":"replace item","block-switching/data_setvariableto":"set variable","block-switching/data_showlist":"show list","block-switching/data_showvariable":"show variable","block-switching/debugger_error":"error","block-switching/debugger_log":"log","block-switching/debugger_warn":"warn","block-switching/event_broadcast":"broadcast","block-switching/event_broadcastandwait":"broadcast and wait","block-switching/looks_backdropnumbername":"backdrop number or name","block-switching/looks_changeeffectby":"change effect","block-switching/looks_changesizeby":"change size","block-switching/looks_costumenumbername":"costume number or name","block-switching/looks_goforwardbackwardlayers":"go forward or backward layers","block-switching/looks_gotofrontback":"go to front or back layer","block-switching/looks_hide":"hide","block-switching/looks_nextbackdrop":"next backdrop","block-switching/looks_nextcostume":"next costume","block-switching/looks_say":"say","block-switching/looks_sayforsecs":"say for seconds","block-switching/looks_seteffectto":"set effect","block-switching/looks_setsizeto":"set size","block-switching/looks_show":"show","block-switching/looks_switchbackdropto":"switch backdrop","block-switching/looks_switchbackdroptoandwait":"switch backdrop and wait","block-switching/looks_think":"think","block-switching/looks_thinkforsecs":"think for seconds","block-switching/motion_changexby":"change x","block-switching/motion_changeyby":"change y","block-switching/motion_setx":"set x","block-switching/motion_sety":"set y","block-switching/motion_turnleft":"turn left","block-switching/motion_turnright":"turn right","block-switching/motion_xposition":"x position","block-switching/motion_yposition":"y position","block-switching/music_changeTempo":"change tempo","block-switching/music_setTempo":"set tempo","block-switching/operator_add":"+","block-switching/operator_and":"and","block-switching/operator_divide":"/","block-switching/operator_equals":"=","block-switching/operator_gt":">","block-switching/operator_lt":"<","block-switching/operator_mod":"mod","block-switching/operator_multiply":"*","block-switching/operator_or":"or","block-switching/operator_subtract":"-","block-switching/pen_changePenColorParamBy":"change parameter","block-switching/pen_changePenHueBy":"change hue","block-switching/pen_changePenShadeBy":"change shade","block-switching/pen_changePenSizeBy":"change size","block-switching/pen_penDown":"pen down","block-switching/pen_penUp":"pen up","block-switching/pen_setPenColorParamTo":"set parameter","block-switching/pen_setPenHueToNumber":"set hue","block-switching/pen_setPenShadeToNumber":"set shade","block-switching/pen_setPenSizeTo":"set size","block-switching/sensing_coloristouchingcolor":"color touching color","block-switching/sensing_mousex":"mouse x","block-switching/sensing_mousey":"mouse y","block-switching/sensing_touchingcolor":"touching color","block-switching/sound_changeeffectby":"change effect","block-switching/sound_changevolumeby":"change volume","block-switching/sound_play":"start","block-switching/sound_playuntildone":"play until done","block-switching/sound_seteffectto":"set effect","block-switching/sound_setvolumeto":"set volume","blocks2image/error_blocks_not_added":"Add blocks to workspace!","blocks2image/export_all_to_PNG":"Export all as PNG","blocks2image/export_all_to_SVG":"Export all as SVG","blocks2image/export_selected_to_PNG":"Export block as PNG","blocks2image/export_selected_to_SVG":"Export block as SVG","editor-extra-keys/enter-key":"enter","move-to-top-bottom/bottom":"move to bottom","move-to-top-bottom/top":"move to top","rename-broadcasts/RENAME_BROADCAST":"Rename message","rename-broadcasts/RENAME_BROADCAST_MODAL_TITLE":"Rename Message","rename-broadcasts/RENAME_BROADCAST_TITLE":"Rename all \\"{name}\\" messages to:","swap-local-global/cant-convert-cloud":"Cloud variables can\'t be converted to this sprite only.","swap-local-global/cant-convert-conflict":"Can\'t convert because it would conflict with variables in another sprite: {sprites}","swap-local-global/cant-convert-stage":"The stage can\'t have variables for this sprite only.","swap-local-global/cant-convert-to-local":"Can\'t convert because it\'s used by multiple sprites: {sprites}","swap-local-global/cant-convert-used-elsewhere":"Can\'t convert because it\'s used by another sprite: {sprite}","swap-local-global/edit":"Edit properties:","swap-local-global/edit-list-header":"Edit List","swap-local-global/edit-list-option":"Rename or edit list","swap-local-global/edit-variable-header":"Edit Variable","swap-local-global/edit-variable-option":"Rename or edit variable","swap-local-global/to-global":"Convert to \\"For all sprites\\"","swap-local-global/to-local":"Convert to \\"For this sprite only\\"","hide-stage/hide-stage":"Hide stage"}')},1527:function(e,t,n){"use strict";t.a={de:()=>n.e(58).then(n.t.bind(null,1536,3)),es:()=>n.e(59).then(n.t.bind(null,1537,3)),fr:()=>n.e(60).then(n.t.bind(null,1538,3)),hu:()=>n.e(61).then(n.t.bind(null,1539,3)),it:()=>n.e(62).then(n.t.bind(null,1540,3)),ja:()=>n.e(63).then(n.t.bind(null,1541,3)),ko:()=>n.e(64).then(n.t.bind(null,1542,3)),nl:()=>n.e(65).then(n.t.bind(null,1543,3)),pl:()=>n.e(66).then(n.t.bind(null,1544,3)),pt:()=>n.e(67).then(n.t.bind(null,1545,3)),ro:()=>n.e(68).then(n.t.bind(null,1546,3)),ru:()=>n.e(69).then(n.t.bind(null,1547,3)),sl:()=>n.e(70).then(n.t.bind(null,1548,3)),tr:()=>n.e(71).then(n.t.bind(null,1549,3)),"zh-tw":()=>n.e(72).then(n.t.bind(null,1550,3))}},1528:function(e,t,n){"use strict";t.a={"cat-blocks":()=>n.e(10).then(n.bind(null,1647)),"editor-devtools":()=>n.e(4).then(n.bind(null,1630)),"find-bar":()=>n.e(4).then(n.bind(null,1640)),"middle-click-popup":()=>n.e(4).then(n.bind(null,1648)),"jump-to-def":()=>n(1645),"editor-searchable-dropdowns":()=>n.e(4).then(n.bind(null,1649)),"data-category-tweaks-v2":()=>n.e(16).then(n.bind(null,1650)),"block-palette-icons":()=>n.e(8).then(n.bind(null,1628)),"hide-flyout":()=>n.e(31).then(n.bind(null,1634)),mediarecorder:()=>n.e(36).then(n.bind(null,1651)),"drag-drop":()=>n(1646),debugger:()=>n.e(17).then(n.bind(null,1626)),pause:()=>n(1633),"mute-project":()=>n(1639),"vol-slider":()=>n.e(56).then(n.bind(null,1632)),clones:()=>n.e(11).then(n.bind(null,1635)),"mouse-pos":()=>n.e(37).then(n.bind(null,1652)),"color-picker":()=>n.e(4).then(n.bind(null,1641)),"remove-sprite-confirm":()=>n.e(43).then(n.bind(null,1653)),"block-count":()=>n.e(7).then(n.bind(null,1654)),"onion-skinning":()=>n.e(4).then(n.bind(null,1631)),"paint-snap":()=>n.e(41).then(n.bind(null,1627)),"default-costume-editor-color":()=>n.e(18).then(n.bind(null,1655)),"bitmap-copy":()=>n.e(4).then(n.bind(null,1656)),"2d-color-picker":()=>n.e(5).then(n.bind(null,1636)),"better-img-uploads":()=>n.e(6).then(n.bind(null,1642)),"pick-colors-from-stage":()=>n.e(4).then(n.bind(null,1657)),"custom-block-shape":()=>n.e(13).then(n.bind(null,1658)),"zebra-striping":()=>n.e(57).then(n.bind(null,1659)),"editor-theme3":()=>n.e(27).then(n.bind(null,1660)),"custom-block-text":()=>n.e(14).then(n.bind(null,1590)),"editor-colored-context-menus":()=>n.e(22).then(n.bind(null,1661)),"editor-stage-left":()=>n.e(25).then(n.bind(null,1662)),"editor-buttons-reverse-order":()=>n.e(21).then(n.bind(null,1595)),"variable-manager":()=>n.e(55).then(n.bind(null,1637)),"search-sprites":()=>n.e(45).then(n.bind(null,1663)),"sprite-properties":()=>n.e(46).then(n.bind(null,1638)),gamepad:()=>n.e(29).then(n.bind(null,1629)),"editor-sounds":()=>n.e(24).then(n.bind(null,1664)),folders:()=>n.e(4).then(n.bind(null,1643)),"block-switching":()=>n.e(4).then(n.bind(null,1665)),"load-extensions":()=>n.e(35).then(n.bind(null,1666)),"custom-zoom":()=>n.e(15).then(n.bind(null,1667)),"initialise-sprite-position":()=>n.e(34).then(n.bind(null,1668)),blocks2image:()=>n.e(9).then(n.bind(null,1669)),"remove-curved-stage-border":()=>n.e(42).then(n.bind(null,1606)),"transparent-orphans":()=>n.e(48).then(n.bind(null,1608)),"paint-by-default":()=>n.e(40).then(n.bind(null,1670)),"block-cherry-picking":()=>n.e(4).then(n.bind(null,1671)),"hide-new-variables":()=>n.e(32).then(n.bind(null,1672)),"editor-extra-keys":()=>n.e(23).then(n.bind(null,1673)),"hide-delete-button":()=>n.e(30).then(n.bind(null,1610)),"no-script-bumping":()=>n.e(38).then(n.bind(null,1674)),"disable-stage-drag-select":()=>n.e(20).then(n.bind(null,1675)),"move-to-top-bottom":()=>n.e(4).then(n.bind(null,1676)),"disable-paste-offset":()=>n.e(19).then(n.bind(null,1677)),"block-duplicate":()=>n.e(4).then(n.bind(null,1678)),"rename-broadcasts":()=>n.e(4).then(n.bind(null,1679)),"swap-local-global":()=>n.e(47).then(n.bind(null,1680)),"editor-comment-previews":()=>n.e(4).then(n.bind(null,1681)),columns:()=>n.e(12).then(n.bind(null,1682)),"number-pad":()=>n.e(39).then(n.bind(null,1683)),"script-snap":()=>n.e(44).then(n.bind(null,1684)),fullscreen:()=>n.e(28).then(n.bind(null,1685)),"hide-stage":()=>n.e(33).then(n.bind(null,1644)),"tw-straighten-comments":()=>n.e(54).then(n.bind(null,1686)),"tw-remove-backpack":()=>n.e(52).then(n.bind(null,1687)),"tw-remove-feedback":()=>n.e(53).then(n.bind(null,1624)),"tw-disable-cloud-variables":()=>n.e(49).then(n.bind(null,1688)),"tw-disable-compiler":()=>n.e(50).then(n.bind(null,1689)),"tw-disable-restore-points":()=>n.e(51).then(n.bind(null,1690)),"editor-stepping":()=>n.e(26).then(n.bind(null,1691))}},1529:function(e,t,n){(e.exports=n(9)(!1)).push([e.i,".pause-btn {\n  width: 2rem;\n  height: 2rem;\n  padding: 0.375rem;\n  border-radius: 0.25rem;\n  user-select: none;\n  user-drag: none;\n  cursor: pointer;\n}\n\n.pause-btn:hover {\n  background-color: hsla(0, 100%, 65%, 0.15);\n}\n",""])},1530:function(e,t,n){"use strict";function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function r(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var o=n.call(e,t||"default");if("object"!=typeof o)return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n.d(t,"a",(function(){return u}));let a=!1,i=!1,c=[];const l=function(e){var t,n,o,r,a,l;if(!e.target)return;const d=e.target.closest(".react-contextmenu-wrapper");if(!d)return;let u,p=d.querySelector("nav.react-contextmenu");const h={};if(null===(t=d[this.traps.getInternalKey(d)])||void 0===t||null===(n=t.return)||void 0===n||null===(o=n.return)||void 0===o||null===(r=o.return)||void 0===r||null===(a=r.stateNode)||void 0===a||null===(l=a.props)||void 0===l||!l.dragType)return;{const e=d[this.traps.getInternalKey(d)].return.return.return.stateNode.props;u=e.dragType.toLowerCase(),h.name=e.name,h.itemId=e.id,h.index=e.index}const g=s({menuItem:p,target:d,type:u},h);Array.from(p.children).forEach(e=>{e.classList.contains("sa-ctx-menu")&&e.remove()});for(const e of i?c.flatMap(e=>"function"==typeof e?e(u,g):e):c){if(!e)continue;if(e.types&&!e.types.some(e=>u===e))continue;if(e.condition&&!e.condition(g))continue;const t=document.createElement("div"),n=["context-menu_menu-item"];e.border&&n.push("context-menu_menu-item-bordered"),e.dangerous&&n.push("context-menu_menu-item-danger"),t.className=this.scratchClass(...n,{others:["react-contextmenu-item","sa-ctx-menu",e.className||""]});const o=document.createElement("span");o.textContent=e.label,t.append(o),this.displayNoneWhileDisabled(t,{display:"block"}),t.addEventListener("click",t=>{t.stopPropagation(),window.dispatchEvent(new CustomEvent("REACT_CONTEXTMENU_HIDE",{detail:{action:"REACT_CONTEXTMENU_HIDE"}})),e.callback(g)}),this.appendToSharedSpace({space:e.position,order:e.order,scope:p,element:t})}},d=e=>{a||(a=!0,document.body.addEventListener("contextmenu",t=>l.call(e,t),{capture:!0}))},u=(e,t,n)=>{void 0===n?(c.push(t),i=!0):c.push(s(s({},n),{},{callback:t})),d(e)}},1531:function(e,t,n){"use strict";n.d(t,"b",(function(){return i})),n.d(t,"a",(function(){return l})),n.d(t,"c",(function(){return d}));var o=n(161),s=n.n(o),r=n(1532),a=n.n(r);const i=function(e,t){let{isOpen:n=!1}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const o=Object.assign(document.createElement("div"),{className:e.scratchClass("modal_modal-overlay"),dir:e.direction});o.style.display=n?"":"none",document.body.appendChild(o);const r=Object.assign(document.createElement("div"),{className:e.scratchClass("modal_modal-content")});r.addEventListener("click",e=>e.stopPropagation()),o.appendChild(r);const i=Object.assign(document.createElement("div"),{className:e.scratchClass("modal_header")});r.appendChild(i),i.appendChild(Object.assign(document.createElement("div"),{className:e.scratchClass("modal_header-item","modal_header-item-title"),innerText:t}));const c=Object.assign(document.createElement("div"),{className:e.scratchClass("modal_header-item","modal_header-item-close")});i.appendChild(c);const l=Object.assign(document.createElement("div"),{className:e.scratchClass("close-button_close-button","close-button_large")});c.appendChild(l),l.appendChild(Object.assign(document.createElement("img"),{className:e.scratchClass("close-button_close-icon"),src:s.a}));const d=Object.assign(document.createElement("div"),{className:a.a.modalContent});return r.appendChild(d),{container:r,content:d,backdrop:o,closeButton:l,open:()=>{o.style.display=""},close:()=>{o.style.display="none"},remove:o.remove.bind(o)}},c=e=>{const t=Object.assign(document.createElement("div"),{className:e.scratchClass("prompt_button-row")}),n=Object.assign(document.createElement("button"),{className:e.scratchClass("prompt_cancel-button"),innerText:e.scratchMessage("gui.prompt.cancel")});t.appendChild(n);const o=Object.assign(document.createElement("button"),{className:e.scratchClass("prompt_ok-button"),innerText:e.scratchMessage("gui.prompt.ok")});return t.appendChild(o),{buttonRow:t,cancelButton:n,okButton:o}},l=function(e,t,n){let{useEditorClasses:o=!1}=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};const{remove:s,container:r,content:a,backdrop:i,closeButton:l}=e.createModal(t,{isOpen:!0,useEditorClasses:o,useSizesClass:!0}),d=null!==e.editorMode&&o?"editor":e.clientVersion;"editor"===d&&(r.classList.add(e.scratchClass("prompt_modal-content")),a.classList.add(e.scratchClass("prompt_body"))),a.appendChild(Object.assign(document.createElement("div"),{className:e.scratchClass("prompt_label"),innerText:n}));const{buttonRow:u,cancelButton:p,okButton:h}=c(e);return a.appendChild(u),h.focus(),new Promise(e=>{const t=()=>{s(),e(!1)},n=()=>{s(),e(!0)};i.addEventListener("click",t),l.addEventListener("click",t),p.addEventListener("click",t),h.addEventListener("click",n),r.addEventListener("keydown",e=>{"Enter"===e.key&&n(),"Escape"===e.key&&t()})})},d=function(e,t,n){let o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",{useEditorClasses:s=!1}=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};const{remove:r,container:a,content:i,backdrop:l,closeButton:d}=e.createModal(t,{isOpen:!0,useEditorClasses:s,useSizesClass:!0});a.classList.add(e.scratchClass("prompt_modal-content")),i.classList.add(e.scratchClass("prompt_body")),i.appendChild(Object.assign(document.createElement("div"),{className:e.scratchClass("prompt_label"),innerText:n}));const u=Object.assign(document.createElement("input"),{className:e.scratchClass("prompt_variable-name-text-input"),value:o});i.appendChild(u),u.focus(),u.select();const{buttonRow:p,cancelButton:h,okButton:g}=c(e);return i.appendChild(p),new Promise(e=>{const t=()=>{r(),e(null)},n=()=>{r(),e(u.value)};l.addEventListener("click",t),d.addEventListener("click",t),h.addEventListener("click",t),g.addEventListener("click",n),a.addEventListener("keydown",e=>{"Enter"===e.key&&n(),"Escape"===e.key&&t()})})}},1532:function(e,t,n){var o=n(1533);"string"==typeof o&&(o=[[e.i,o,""]]);var s={hmr:!0,transform:void 0,insertInto:void 0};n(10)(o,s);o.locals&&(e.exports=o.locals)},1533:function(e,t,n){(t=e.exports=n(9)(!1)).push([e.i,'.modal_modal-content_vp9Mi {\n  background-color: white;\n  color: #575e75;\n}\n[theme="dark"] .modal_modal-content_vp9Mi {\n  background-color: var(--ui-primary);\n  color: var(--text-primary);\n}\n',""]),t.locals={"modal-content":"modal_modal-content_vp9Mi",modalContent:"modal_modal-content_vp9Mi"}},1534:function(e,t,n){"use strict";n.d(t,"a",(function(){return i})),n.d(t,"b",(function(){return r}));const o=document.createElement("div");o.style.display="none",document.body.appendChild(o);const s=new Map,r=()=>{for(const e of s.values())e.update()};class a{constructor(e){this.el=null,this.styleText=e,this.precedence=0,this.dependents=[],this.previousEnabledDependents=[]}addDependent(e,t,n){this.dependents.push([e,n]),t>this.precedence&&(this.precedence=t,this.el&&(this.el.dataset.precedence=t)),this.update()}getEnabledDependents(){const e=[];for(const[t,n]of this.dependents)n()&&e.push(t);return e}dependsOn(e){return this.dependents.some(t=>t[0]===e)}getElement(){if(!this.el){const e=document.createElement("style");e.className="scratch-addons-style",e.dataset.precedence=this.precedence,e.textContent=this.styleText,this.styleText=null,this.el=e}return this.el}update(){const e=this.getEnabledDependents();if(!((e,t)=>{if(e.length!==t.length)return!1;for(let n=0;n<e.length;e++)if(e[n]!==t[n])return!1;return!0})(e,this.previousEnabledDependents))if(this.previousEnabledDependents=e,e.length>0){const t=this.getElement();t.dataset.addons=e.join(",");for(const e of o.children){if((+e.dataset.precedence||0)>=this.precedence)return void o.insertBefore(t,e)}o.appendChild(t)}else this.el&&this.el.remove()}}const i=(e,t)=>{if(!s.get(e)){const n=new a(t);s.set(e,n)}return s.get(e)}},1535:function(e,t,n){"use strict";const o=["columns","editor-stage-left","editor-theme3"];t.a=e=>o.indexOf(e)+1},1633:function(e,t,n){"use strict";n.r(t),n.d(t,"resources",(function(){return r}));var o=n(1502),s=n(1529);const r={"userscript.js":async function(e){let{addon:t,console:n,msg:s}=e;Object(o.f)(t.tab.traps.vm);const r=document.createElement("img");r.className="pause-btn",r.draggable=!1,r.title=s("pause");const a=()=>r.src=t.self.getResource(Object(o.b)()?"/play.svg":"/pause.svg");for(r.addEventListener("click",()=>Object(o.e)(!Object(o.b)())),t.tab.displayNoneWhileDisabled(r),t.self.addEventListener("disabled",()=>Object(o.e)(!1)),a(),Object(o.c)(a);;)await t.tab.waitForElement("[class^='green-flag']",{markAsSeen:!0,reduxEvents:["scratch-gui/mode/SET_PLAYER","fontsLoaded/SET_FONTS_LOADED","scratch-gui/locales/SELECT_LOCALE"]}),t.tab.appendToSharedSpace({space:"afterGreenFlag",element:r,order:0})},"style.css":n.n(s).a,"pause.svg":"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iMTgiIHdpZHRoPSIxOCI+PHBhdGggZD0iTTIzMS40MjkgMTg4LjkyOVYxNzEuMDdoNC4yODV2MTcuODU4em0xMi4xNDIgMFYxNzEuMDdoNC4yODZ2MTcuODU4eiIgdHJhbnNmb3JtPSJtYXRyaXgoMS4wMzMwOSAwIDAgLjk1NDI3IC0yMzguNTczIC0xNjIuNzY5KSIgZGF0YS1wYXBlci1kYXRhPSJ7JnF1b3Q7aXNQYWludGluZ0xheWVyJnF1b3Q7OnRydWV9IiBmaWxsPSIjZmZhZTAwIiBzdHJva2U9IiNkODk0MDAiIHN0cm9rZS1taXRlcmxpbWl0PSIxMCIgc3R5bGU9Im1peC1ibGVuZC1tb2RlOm5vcm1hbCIvPjwvc3ZnPg==","play.svg":"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iMTgiIHdpZHRoPSIxOCI+PHBhdGggZD0ibTI0Ni4wNTUgMTgwLTEyLjExIDEyLjExdi0yNC4yMnoiIHRyYW5zZm9ybT0ibWF0cml4KDEuMTM5NDkgMCAwIC42Nzk0MyAtMjY0LjU5NSAtMTEzLjI5OCkiIHN0cm9rZS1taXRlcmxpbWl0PSIxMCIgc3Ryb2tlPSIjZDg5NDAwIiBmaWxsPSIjZmZhZTAwIiBkYXRhLXBhcGVyLWRhdGE9InsmcXVvdDtpc1BhaW50aW5nTGF5ZXImcXVvdDs6dHJ1ZX0iLz48L3N2Zz4="}},1639:function(e,t,n){"use strict";n.r(t),n.d(t,"resources",(function(){return s}));var o=n(1514);const s={"userscript.js":async function(e){let{addon:t,console:n}=e;const s=t.tab.traps.vm;Object(o.g)(s);const r=document.createElement("img");r.loading="lazy",r.src=t.self.getResource("/mute.svg"),r.className="sa-mute-project-icon",r.style.userSelect="none",t.tab.displayNoneWhileDisabled(r);const a=()=>{r.style.display=t.self.disabled||!Object(o.b)()?"none":""};Object(o.c)(a),a();const i=e=>{t.self.disabled||!e.ctrlKey&&!e.metaKey||(e.cancelBubble=!0,e.preventDefault(),Object(o.d)(!Object(o.b)()))};for(t.self.addEventListener("disabled",()=>{Object(o.b)()&&Object(o.d)(!1)});;){let e=await t.tab.waitForElement("[class^='green-flag_green-flag']",{markAsSeen:!0,reduxEvents:["scratch-gui/mode/SET_PLAYER","fontsLoaded/SET_FONTS_LOADED","scratch-gui/locales/SELECT_LOCALE"]});t.tab.appendToSharedSpace({space:"afterStopButton",element:r,order:0}),e.addEventListener("click",i),e.addEventListener("contextmenu",i)}},"mute.svg":"data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPHN2ZyB3aWR0aD0iMjBweCIgaGVpZ2h0PSIyMHB4IiB2aWV3Qm94PSIwIDAgMjAgMjAiIHZlcnNpb249IjEuMSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayI+CiAgICA8IS0tIEdlbmVyYXRvcjogU2tldGNoIDU1LjIgKDc4MTgxKSAtIGh0dHBzOi8vc2tldGNoYXBwLmNvbSAtLT4KICAgIDx0aXRsZT5Tb3VuZC9FZmZlY3RzL011dGU8L3RpdGxlPgogICAgPGRlc2M+Q3JlYXRlZCB3aXRoIFNrZXRjaC48L2Rlc2M+CiAgICA8ZyBpZD0iU291bmQvRWZmZWN0cy9NdXRlIiBzdHJva2U9Im5vbmUiIHN0cm9rZS13aWR0aD0iMSIgZmlsbD0ibm9uZSIgZmlsbC1ydWxlPSJldmVub2RkIj4KICAgICAgICA8cGF0aCBmaWxsPSIjQ0Y2M0NGIiBkPSJNMTMuNDU0MTc0OSw1LjA0ODE1MjQzIEwxNS42MjgxMTY4LDIuODc0MjEwNTQgQzE1LjkyMTAxLDIuNTgxMzE3MzIgMTYuMzk1ODgzNywyLjU4MTMxNzMyIDE2LjY4ODc3NywyLjg3NDIxMDU0IEMxNi45ODE2NzAyLDMuMTY3MTAzNzYgMTYuOTgxNjcwMiwzLjY0MTk3NzQ5IDE2LjY4ODc3NywzLjkzNDg3MDcxIEw0LjUzMDMzMDA5LDE2LjA5MzMxNzYgQzQuMjM3NDM2ODcsMTYuMzg2MjEwOCAzLjc2MjU2MzEzLDE2LjM4NjIxMDggMy40Njk2Njk5MSwxNi4wOTMzMTc2IEMzLjE3Njc3NjcsMTUuODAwNDI0NCAzLjE3Njc3NjcsMTUuMzI1NTUwNiAzLjQ2OTY2OTkxLDE1LjAzMjY1NzQgTDYuMzEyMTQ5MzIsMTIuMTkwMTc4IEM2LjEyNDExOTEsMTIuMDYyMTM3OSA2LDExLjg0NjMzMzEgNiwxMS42MDI5ODc1IEw2LDguNjM3NDg3NSBDNiw4LjI0NzExMjUgNi4zMTk0MTUyNyw3LjkyNzYxMjUgNi43MDk2ODY3NSw3LjkyNzYxMjUgTDcuMDI0NjAzMjIsNy45Mjc2MTI1IEM4Ljc1Nzc2ODQ4LDcuOTI3NjEyNSAxMC4yOTQxMTEsNi44MTM4NjI1IDEwLjgzMzk2NzgsNS4xNjY4NjI1IEMxMC45Mjk1Njc0LDQuODc0MzYyNSAxMS4yMDE3NDUyLDQuNjc3NDg3NSAxMS41MDc2NjQxLDQuNjc3NDg3NSBMMTIuODMxNDM3OSw0LjY3NzQ4NzUgQzEzLjEwMDI4NDQsNC42Nzc0ODc1IDEzLjMzNDEwNzUsNC44MjcxNzIwOCAxMy40NTQxNzQ5LDUuMDQ4MTUyNDMgWiBNMTMuNTQsOS4wODM2NDc3MSBMMTMuNTQsMTQuODUzMTEyNSBDMTMuNTQsMTUuMjQ1NzM3NSAxMy4yMjI4MzQxLDE1LjU2Mjk4NzUgMTIuODMxNDM3OSwxNS41NjI5ODc1IEwxMS41MDc2NjQxLDE1LjU2Mjk4NzUgQzExLjIwMTc0NTIsMTUuNTYyOTg3NSAxMC45Mjk1Njc0LDE1LjM2NjExMjUgMTAuODMzOTY3OCwxNS4wNzM2MTI1IEMxMC41NzczNzg1LDE0LjI5MDgwNzcgMTAuMDk1NjgxMywxMy42Mjg0NjUgOS40NzQ3MzUzMSwxMy4xNDg5MTI0IEwxMy41NCw5LjA4MzY0NzcxIFoiIGlkPSJwYXRoLTEiPjwvcGF0aD4KICAgIDwvZz4KPC9zdmc+Cg=="}},1645:function(e,t,n){"use strict";n.r(t),n.d(t,"resources",(function(){return s}));var o=n(1511);const s={"userscript.js":async function(e){let{addon:t,msg:n,console:s}=e;const r=new o.a(t),a=await t.tab.traps.getBlockly();Object.defineProperty(a.Gesture.prototype,"jumpToDef",{get:()=>!t.self.disabled});const i=a.Gesture.prototype.doBlockClick_;a.Gesture.prototype.doBlockClick_=function(){if(!t.self.disabled&&(1===this.mostRecentEvent_.button||this.mostRecentEvent_.shiftKey)){let e=this.startBlock_;for(;e;e=e.getSurroundParent())if("procedures_call"===e.type){let t=e.getProcCode(),n=r.getWorkspace().getTopBlocks();for(const e of n)if("procedures_definition"===e.type){let n=e.getChildren()[0].getProcCode();if(n&&n===t)return void r.scrollBlockIntoView(e)}}}i.call(this)}}}},1646:function(e,t,n){"use strict";n.r(t),n.d(t,"resources",(function(){return o}));const o={"userscript.js":async function(e){let{addon:t,console:n}=e,o=null;const s=new WeakMap,r=(e,t)=>{let n;s.has(e)?n=s.get(e):(n=e.animate([{},{backgroundColor:"hsla(0, 100%, 77%, 1)"}],{duration:250,fill:"forwards",easing:"ease"}),s.set(e,n)),n.playbackRate=t},a=Object.getOwnPropertyDescriptor(window.HTMLInputElement.prototype,"value").set;document.addEventListener("dragover",e=>{if(t.self.disabled)return;if(!e.dataTransfer.types.includes("Files"))return;let s,i;if((s=e.target.closest('div[class*="sprite-selector_sprite-selector"]'))||(s=e.target.closest('div[class*="stage-selector_stage-selector"]'))||(s=e.target.closest('div[class*="selector_wrapper"]'))?i=e=>{const n=t.settings.get("use-hd-upload")?"":":not(.sa-better-img-uploads-input)",o=s.querySelector('input[class*="action-menu_file-input"]'+n);o.files=e,o.dispatchEvent(new Event("change",{bubbles:!0}))}:(s=e.target.closest('div[class*="monitor_list-monitor"]'))?i=e=>{const t=document.querySelector("body > .react-contextmenu.react-contextmenu--visible");s.dispatchEvent(new MouseEvent("contextmenu",{bubbles:!0}));const o=document.querySelector("body > .react-contextmenu.react-contextmenu--visible"),r=null===o?t:o;r.style.display="none";const a=document.body.appendChild;document.body.appendChild=t=>{if(document.body.appendChild=a,!(t instanceof HTMLInputElement))return n.error('File input was not immediately given to appendChild upon clicking "Import"!'),a(t);document.body.appendChild(t),t.click=()=>{},t.files=e,t.dispatchEvent(new Event("change")),window.requestAnimationFrame(()=>{window.requestAnimationFrame(()=>{r.style.display=null,r.style.opacity=0,r.style.pointerEvents="none"})})},r.children[0].click()}:(s=e.target.closest('div[class*="question_question-input"] > input[class*="input_input-form_l9eYg"]'))&&(i=async e=>{const t=(await Promise.all(Array.from(e,e=>e.text()))).join("").replace(/[\r\n]+$/,"").replace(/\r?\n|\r/g," "),n=s.selectionStart;((e,t)=>{a.call(e,t),e.dispatchEvent(new Event("change",{bubbles:!0}))})(s,s.value.slice(0,n)+t+s.value.slice(s.selectionEnd)),s.setSelectionRange(n,n+t.length)}),!s)return;if(e.preventDefault(),s===o)return;o=s;const c=[s,s.querySelector('div[class*="stage-selector_header_"]'),s.querySelector('div[class*="sprite-info_sprite-info"]'),s.querySelector('div[class*="monitor_list-body"]')].filter(e=>e);for(const e of c)r(e,1);const l=e=>{e.preventDefault(),p(),e.dataTransfer.types.includes("Files")&&e.dataTransfer.files.length>0&&i(e.dataTransfer.files)},d=e=>{e.preventDefault(),e.dataTransfer.dropEffect="copy"};e.dataTransfer.dropEffect="copy";const u=e=>{e.preventDefault(),p()},p=()=>{o=null,s.removeEventListener("dragover",d),s.removeEventListener("dragleave",u),s.removeEventListener("drop",l);for(const e of c)r(e,-1)};s.addEventListener("dragover",d),s.addEventListener("dragleave",u),s.addEventListener("drop",l)},{useCapture:!0})}}},854:function(e,t){Blob.prototype.text||(Blob.prototype.text=function(){return new Promise((e,t)=>{const n=new FileReader;n.onload=()=>e(n.result),n.onerror=()=>t(new Error("Cannot read blob as text")),n.readAsText(this)})}),Array.prototype.flat||(Array.prototype.flat=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;const t=[];for(const n of this)if(Array.isArray(n))if(e<1)t.push(n);else for(const o of n.flat(e-1))t.push(o);else t.push(n);return t}),"function"!=typeof queueMicrotask&&(window.queueMicrotask=e=>{Promise.resolve().then(e)})}}]);